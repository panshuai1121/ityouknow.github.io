I"•E<p>by é—²æ¬¢</p>

<p>PyQuery åº“æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§åˆçµæ´»çš„ç½‘é¡µè§£æåº“ï¼Œå¦‚æœä½ æœ‰å‰ç«¯å¼€å‘ç»éªŒï¼Œé‚£ä¹ˆä½ åº”è¯¥æ¥è§¦è¿‡ jQuery ,é‚£ä¹ˆ PyQuery å°±æ˜¯ä½ éå¸¸ç»ä½³çš„é€‰æ‹©ï¼ŒPyQuery æ˜¯ Python ä»¿ç…§ jQuery çš„ä¸¥æ ¼å®ç°ï¼Œè¯­æ³•ä¸ jQuery å‡ ä¹å®Œå…¨ç›¸åŒã€‚
<!--more--></p>

<h2 id="å®‰è£…">å®‰è£…</h2>

<p>è·Ÿå®‰è£…å…¶ä»–åº“ä¸€æ ·ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; pip3 install pyquery
</code></pre></div></div>

<p>å®‰è£…äº†ä¹‹åï¼Œåœ¨ç¨‹åºé‡Œé¢å°±å¯ä»¥å¼•ç”¨äº†ï¼Œå¼•ç”¨æ–¹æ³•è·Ÿå…¶ä»–åº“ç±»ä¼¼ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from pyquery import PyQuery as pq
</code></pre></div></div>

<h2 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h2>

<p>PyQuery å¯ä»¥å°† HTML å­—ç¬¦ä¸²åˆå§‹åŒ–ä¸ºå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å°† HTML æ–‡ä»¶åˆå§‹åŒ–ä¸ºå¯¹è±¡ï¼Œç”šè‡³å¯ä»¥å°†è¯·æ±‚çš„å“åº”åˆå§‹åŒ–ä¸ºå¯¹è±¡ã€‚ä¸‹é¢æˆ‘ä»¬ä¸€ä¸ªä¸ªæ¥ä»‹ç»ã€‚</p>

<h3 id="åˆå§‹åŒ–å­—ç¬¦ä¸²">åˆå§‹åŒ–å­—ç¬¦ä¸²</h3>

<p>å¯¹äºä¸€ä¸ªæ ‡å‡†çš„ HTML å­—ç¬¦ä¸²ï¼ŒPyQuery å¯ä»¥ç›´æ¥åˆå§‹åŒ–ä¸ºå¯¹è±¡ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html = """
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        æˆ‘çˆ±æˆ‘çš„ç¥–å›½
        <span class="nt">&lt;title&gt;</span>China<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li1"</span><span class="nt">&gt;</span>äº”æ˜Ÿ<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li2"</span><span class="nt">&gt;</span>çº¢æ——<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li3"</span><span class="nt">&gt;</span>è¿é£é£˜æ‰¬<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
"""

doc = pq(html)
print(type(doc))
print(doc)

# è¾“å‡ºç»“æœ
<span class="nt">&lt;class</span> <span class="err">'</span><span class="na">pyquery.pyquery.PyQuery</span><span class="err">'</span><span class="nt">&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        æˆ‘çˆ±æˆ‘çš„ç¥–å›½
        <span class="nt">&lt;title&gt;</span>China<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li1"</span><span class="nt">&gt;</span>äº”æ˜Ÿ<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li2"</span><span class="nt">&gt;</span>çº¢æ——<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li3"</span><span class="nt">&gt;</span>è¿é£é£˜æ‰¬<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒHTML å­—ç¬¦ä¸²åˆå§‹åŒ–åï¼Œæ‰“å°å‡ºæ¥çš„æ˜¯ä¸€ä¸ª PyQuery å¯¹è±¡ã€‚</p>

<p>å¦‚æœæˆ‘ä»¬çš„å­—ç¬¦ä¸²ä¸æ˜¯ HTML æ ¼å¼å†…å®¹ï¼ŒPyQuery ä¼šè‡ªåŠ¨åŠ ä¸Šæ®µè½æ ‡ç­¾å°†å­—ç¬¦ä¸²å†…å®¹åŒ…è£…æˆ HTML å†…å®¹ã€‚ä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test = '''
this is a string
this is second row
'''

doc = pq(test)
print(type(doc))
print(doc)

# è¾“å‡ºç»“æœ
&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;p&gt;this is a string
this is second row
&lt;/p&gt;
</code></pre></div></div>

<h3 id="åˆå§‹åŒ–-html-æ–‡ä»¶">åˆå§‹åŒ– HTML æ–‡ä»¶</h3>

<p>åˆå§‹åŒ–æ–‡ä»¶ï¼Œåªéœ€è¦åŠ ä¸ª filename å‚æ•°ï¼ŒæŒ‡æ˜ æ–‡ä»¶è·¯å¾„å³å¯ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#filenameå‚æ•°ä¸ºhtmlæ–‡ä»¶è·¯å¾„
test_html = pq(filename='test.html')
print(type(test_html))
print(test_html)

# è¾“å‡ºç»“æœ
<span class="nt">&lt;class</span> <span class="err">'</span><span class="na">pyquery.pyquery.PyQuery</span><span class="err">'</span><span class="nt">&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>å¦‚æœæ–‡ä»¶ä¸æ˜¯ HTML æ–‡ä»¶ï¼Œé‚£ä¹ˆåˆå§‹åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨åŠ ä¸Š HTML æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#filenameå‚æ•°ä¸ºhtmlæ–‡ä»¶è·¯å¾„
test_txt = pq(filename='test.txt')
print(type(test_txt))
print(test_txt)

# è¾“å‡ºç»“æœ
<span class="nt">&lt;class</span> <span class="err">'</span><span class="na">pyquery.pyquery.PyQuery</span><span class="err">'</span><span class="nt">&gt;</span>
<span class="nt">&lt;html&gt;&lt;body&gt;&lt;p&gt;</span>this is a txt<span class="nt">&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</span>
</code></pre></div></div>

<p>æˆ‘çš„ test.txt æ–‡ä»¶ä¸­åªæœ‰ä¸€è¡Œå†…å®¹ï¼š this is a txtã€‚åˆå§‹åŒ–å®Œåï¼Œè‡ªåŠ¨æ·»åŠ äº† HTML æ ‡ç­¾ã€‚</p>

<h3 id="åˆå§‹åŒ–è¯·æ±‚å“åº”">åˆå§‹åŒ–è¯·æ±‚å“åº”</h3>

<p>æˆ‘ä»¬å¯ä»¥æŠŠè¯·æ±‚çš„ç½‘å€å†…å®¹åˆå§‹åŒ–ä¸º PyQuery å¯¹è±¡ï¼Œåªéœ€è¦åŠ ä¸ªå‚æ•° url ï¼Œå°†ç½‘å€èµ‹å€¼ç»™å®ƒå³å¯ã€‚ä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>response = pq(url='https://www.baidu.com')
print(type(response))
print(response)

# è¾“å‡ºç»“æœ
<span class="nt">&lt;class</span> <span class="err">'</span><span class="na">pyquery.pyquery.PyQuery</span><span class="err">'</span><span class="nt">&gt;</span>
<span class="nt">&lt;html&gt;</span> <span class="nt">&lt;head&gt;&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"content-type"</span> <span class="na">content=</span><span class="s">"text/html;charset=utf-8"</span><span class="nt">/&gt;&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=Edge"</span><span class="nt">/&gt;&lt;meta</span> <span class="na">content=</span><span class="s">"always"</span> <span class="na">name=</span><span class="s">"referrer"</span><span class="nt">/&gt;&lt;link</span>
<span class="err">...</span>
</code></pre></div></div>

<p>æˆ‘ä»¬è¯·æ±‚ç™¾åº¦çš„é¦–é¡µï¼Œç„¶ååˆå§‹åŒ–ä¸ºå¯¹è±¡ï¼Œåé¢å†…å®¹è¾ƒå¤šï¼Œå› æ­¤çœç•¥ã€‚</p>

<h2 id="å¸¸ç”¨-css-é€‰æ‹©å™¨">å¸¸ç”¨ CSS é€‰æ‹©å™¨</h2>

<p>PyQuery é‡Œé¢ CSS é€‰æ‹©å™¨çš„ç”¨æ³•è·Ÿ jQuery é‡Œé¢æ˜¯ä¸€æ ·çš„ï¼Œä¾‹å¦‚ï¼Œé’ˆå¯¹ä¸Šé¢çš„ HTML å­—ç¬¦ä¸²å†…å®¹ï¼Œæˆ‘ä»¬è·å– id ä¸º container çš„æ ‡ç­¾ï¼Œç„¶åæ‰“å°å‡ºæ¥ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>doc = pq(html)
print(type(doc('#container')))
print(doc('#container'))

# è¾“å‡ºç»“æœ
&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;ul id="container"&gt;
            &lt;li class="li1"&gt;äº”æ˜Ÿ&lt;/li&gt;
            &lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
            &lt;li class="li3"&gt;è¿é£é£˜æ‰¬&lt;/li&gt;
        &lt;/ul&gt;
</code></pre></div></div>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ class é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print(type(doc('.li2')))
print(doc('.li2'))

# è¾“å‡ºç»“æœ
&lt;class 'pyquery.pyquery.PyQuery'&gt;
&lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
</code></pre></div></div>

<p>å†å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šå±‚é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print(doc('html #container'))

# è¾“å‡ºç»“æœ
&lt;ul id="container"&gt;
            &lt;li class="li1"&gt;äº”æ˜Ÿ&lt;/li&gt;
            &lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
            &lt;li class="li3"&gt;è¿é£é£˜æ‰¬&lt;/li&gt;
        &lt;/ul&gt;
</code></pre></div></div>

<p>å½“ç„¶ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ ¹æ® CSS é€‰æ‹©å™¨ä¿®æ”¹ HTML æ ‡ç­¾çš„å†…å®¹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>li2 = doc('.li2')
li2.css('font-size', '18px')
print(li2)

# è¾“å‡ºç»“æœ
&lt;li class="li2" style="font-size: 18px"&gt;çº¢æ——&lt;/li&gt;
</code></pre></div></div>

<p>è¿™é‡Œæˆ‘ä»¬ç»™ class ä¸ºâ€œli2â€çš„æ ‡ç­¾åŠ äº†å­—ä½“çš„å¤§å°ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„å†…å®¹ä¸­æœ‰äº† style å±æ€§ã€‚</p>

<p>è™½ç„¶ PyQuery æœ‰ä¿®æ”¹ HTML å†…å®¹çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç”¨åˆ°ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€èˆ¬æ˜¯è§£æ HTML å†…å®¹ï¼Œè€Œä¸æ˜¯å»ä¿®æ”¹å®ƒï¼Œå¤§å®¶äº†è§£ä¸€ä¸‹å³å¯ã€‚</p>

<h2 id="ä¼ªç±»é€‰æ‹©å™¨">ä¼ªç±»é€‰æ‹©å™¨</h2>

<p>ä¼ªç±»ï¼ˆPseudo-classesï¼‰æ˜¯æŒ‡åœ¨ HTML ä¸­ï¼ŒåŒä¸€ä¸ªæ ‡ç­¾ï¼Œæ ¹æ®å…¶ä¸åŒçš„çŠ¶æ€ï¼Œæœ‰ä¸åŒçš„æ˜¾ç¤ºæ ·å¼ã€‚è¯¦ç»†çš„ç”¨æ³•å¯ä»¥å‚è€ƒï¼š https://www.runoob.com/css/css-pseudo-classes.html ï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚</p>

<p>æˆ‘ä»¬ä¸»è¦åº”ç”¨ä¼ªç±»é€‰æ‹©å™¨æ¥è§£æ HTMLï¼Œè·å–æˆ‘ä»¬æ‰€éœ€çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pseudo_doc = pq(html)
print(pseudo_doc('li:nth-child(2)'))
#æ‰“å°ç¬¬ä¸€ä¸ªliæ ‡ç­¾
print(pseudo_doc('li:first-child'))
#æ‰“å°æœ€åä¸€ä¸ªæ ‡ç­¾
print(pseudo_doc('li:last-child'))

# è¾“å‡ºç»“æœ
&lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
            
&lt;li class="li1"&gt;äº”æ˜Ÿ&lt;/li&gt;
            
&lt;li class="li3"&gt;è¿é£é£˜æ‰¬&lt;/li&gt;

</code></pre></div></div>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ contains æ–¹æ³•æ¥ç­›é€‰å†…å®¹ï¼Œä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html = """
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        æˆ‘çˆ±æˆ‘çš„ç¥–å›½
        <span class="nt">&lt;title&gt;</span>China<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"container"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li1"</span><span class="nt">&gt;</span>äº”æ˜Ÿå•Š<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li2"</span><span class="nt">&gt;</span>çº¢æ——<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li3"</span><span class="nt">&gt;</span>è¿é£é£˜æ‰¬å•Š<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
"""

pseudo_doc = pq(html)

#æ‰¾åˆ°å«æœ‰Pythonçš„liæ ‡ç­¾
print(pseudo_doc("li:contains('äº”æ˜Ÿ')"))

#æ‰¾åˆ°å«æœ‰å¥½çš„liæ ‡ç­¾
print(pseudo_doc("li:contains('çº¢')"))

#æ‰¾åˆ°å«æœ‰å•Šçš„liæ ‡ç­¾
print(pseudo_doc("li:contains('å•Š')"))

# è¾“å‡ºç»“æœ
<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li1"</span><span class="nt">&gt;</span>äº”æ˜Ÿå•Š<span class="nt">&lt;/li&gt;</span>
            
<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li2"</span><span class="nt">&gt;</span>çº¢æ——<span class="nt">&lt;/li&gt;</span>

<span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li1"</span><span class="nt">&gt;</span>äº”æ˜Ÿå•Š<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"li3"</span><span class="nt">&gt;</span>è¿é£é£˜æ‰¬å•Š<span class="nt">&lt;/li&gt;</span>
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæŸ¥æ‰¾çš„ç»“æœæœ‰å¤šæ¡è®°å½•ï¼Œé‚£ä¹ˆç»“æœä¼šå°†å¤šæ¡è®°å½•æ‹¼åœ¨ä¸€èµ·ã€‚å½“ç„¶ï¼Œå¦‚æœæŸ¥æ‰¾çš„å†…å®¹ä¸å­˜åœ¨ï¼Œå°±ä¼šè¿”å›ç©ºã€‚</p>

<h2 id="æŸ¥æ‰¾æ ‡ç­¾">æŸ¥æ‰¾æ ‡ç­¾</h2>

<p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§æ¡ä»¶åœ¨ Pyquery å¯¹è±¡ä¸­æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ ‡ç­¾ï¼Œç±»ä¼¼äº BeautifulSoup ä¸­çš„ find æ–¹æ³•ã€‚
ä¾‹å¦‚ï¼Œæˆ‘è¦æŸ¥æ‰¾ id ä¸º container çš„æ ‡ç­¾ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#æ‰“å°idä¸ºcontainerçš„æ ‡ç­¾
print(doc.find('#container'))

# è¾“å‡ºç»“æœ
&lt;ul id="container"&gt;
            &lt;li class="li1"&gt;äº”æ˜Ÿå•Š&lt;/li&gt;
            &lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
            &lt;li class="li3"&gt;è¿é£é£˜æ‰¬å•Š&lt;/li&gt;
        &lt;/ul&gt;
</code></pre></div></div>

<p>æˆ‘è¦æŸ¥æ‰¾ id ä¸º container çš„æ ‡ç­¾çš„å­æ ‡ç­¾ï¼Œä½¿ç”¨ children æ–¹æ³•å°±å¯ä»¥å®ç°ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#æ‰“å°idä¸ºcontainerçš„æ ‡ç­¾çš„å­æ ‡ç­¾
container = doc.find('#container')
print(container.children())

# è¾“å‡ºç»“æœ
&lt;li class="li1"&gt;äº”æ˜Ÿå•Š&lt;/li&gt;
            &lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
            &lt;li class="li3"&gt;è¿é£é£˜æ‰¬å•Š&lt;/li&gt;
</code></pre></div></div>

<p>æŸ¥æ‰¾çˆ¶æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ parent æ–¹æ³•ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#æ‰“å°idä¸ºcontainerçš„æ ‡ç­¾çš„çˆ¶æ ‡ç­¾
container = doc.find('#container')
print(container.parent())

# è¾“å‡ºç»“æœ
&lt;body&gt;
        &lt;ul id="container"&gt;
            &lt;li class="li1"&gt;äº”æ˜Ÿå•Š&lt;/li&gt;
            &lt;li class="li2"&gt;çº¢æ——&lt;/li&gt;
            &lt;li class="li3"&gt;è¿é£é£˜æ‰¬å•Š&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/body&gt;
</code></pre></div></div>

<p>æŸ¥æ‰¾å…„å¼Ÿæ ‡ç­¾ï¼Œæˆ‘ä»¬ç”¨ siblings æ–¹æ³•ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#æ‰“å°classä¸ºli2çš„æ ‡ç­¾çš„å…„å¼Ÿæ ‡ç­¾
li2 = doc.find('.li2')
print(li2.siblings())

# è¾“å‡ºç»“æœ
&lt;li class="li1"&gt;äº”æ˜Ÿå•Š&lt;/li&gt;
            &lt;li class="li3"&gt;è¿é£é£˜æ‰¬å•Š&lt;/li&gt;
</code></pre></div></div>

<h2 id="æ ‡ç­¾ä¿¡æ¯çš„æå–">æ ‡ç­¾ä¿¡æ¯çš„æå–</h2>

<p>å‰é¢æˆ‘ä»¬è®²çš„éƒ½æ˜¯æ€ä¹ˆå®šä½åˆ°æ ‡ç­¾ï¼Œè¿™åªæ˜¯æˆ‘ä»¬è§£ææ•°æ®çš„ç¬¬ä¸€æ­¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä»æ ‡ç­¾ä¸­æå–æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚</p>

<p>å¦‚æœä½ éœ€è¦æå–æ ‡ç­¾çš„å±æ€§å€¼ï¼Œå¯ä»¥ç”¨ .attr() æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#è·å–li2çš„classå±æ€§å€¼
print(doc('.li2').attr('class'))

# è¾“å‡ºç»“æœ
li2
</code></pre></div></div>

<p>å¦‚æœä½ ç»†è…°æå–æ ‡ç­¾å†…çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ .text() æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#è·å–li2çš„æ–‡æœ¬
print(doc('.li2').text())

# è¾“å‡ºç»“æœ
çº¢æ——
</code></pre></div></div>

<p>å¦‚æœè¦è·å–æŸä¸ªæ ‡ç­¾ä¸‹é¢çš„æ‰€æœ‰æ–‡æœ¬ï¼ˆåŒ…å«å­æ ‡ç­¾çš„ï¼‰ï¼Œæ€ä¹ˆåšï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸ªä¾‹å­ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#è·å–htmlæ ‡ç­¾ä¸‹é¢çš„æ‰€æœ‰æ–‡æœ¬
print(doc('html').text())

# è¾“å‡ºç»“æœ
æˆ‘çˆ±æˆ‘çš„ç¥–å›½
China
äº”æ˜Ÿå•Š
çº¢æ——
è¿é£é£˜æ‰¬å•Š
</code></pre></div></div>

<p>å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°è¿™ä¸ªæ ‡ç­¾ï¼Œä½¿ç”¨ .text() æ–¹æ³•ã€‚</p>

<p>å¦‚æœæˆ‘ä»¬è¦è·å–æŸä¸ªæ ‡ç­¾ä¸‹é¢çš„æ‰€æœ‰æ–‡æœ¬ï¼Œä½†æ˜¯è¦æ’é™¤æŸäº›æ ‡ç­¾çš„æ–‡æœ¬ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸ªä¾‹å­ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#æ’é™¤éƒ¨åˆ†æ ‡ç­¾æ–‡æœ¬
tag = doc('html')
tag.remove('title')
print(tag.text())

# è¾“å‡ºç»“æœ
æˆ‘çˆ±æˆ‘çš„ç¥–å›½
äº”æ˜Ÿå•Š
çº¢æ——
è¿é£é£˜æ‰¬å•Š
</code></pre></div></div>

<p>æˆ‘ä»¬å¯ä»¥ç”¨ .remove() æ¥åˆ é™¤æŸäº›æ ‡ç­¾ï¼Œä¸Šé¢ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠ title æ ‡ç­¾å»æ‰äº†ï¼Œtitle æ ‡ç­¾å¯¹åº”çš„å†…å®¹ China ä¹Ÿå°±å»æ‰äº†ã€‚</p>

<h2 id="pyquery-å¤„ç†å¤æ‚çš„ç½‘å€è¯·æ±‚">PyQuery å¤„ç†å¤æ‚çš„ç½‘å€è¯·æ±‚</h2>

<p>å‰é¢æˆ‘ä»¬ä»‹ç»äº† PyQuery å¯ä»¥è·å–ç½‘å€è¯·æ±‚çš„ HTML å†…å®¹ï¼Œå¹¶è½¬åŒ–ä¸ºå¯¹è±¡ã€‚æˆ‘ä»¬åœ¨è¯·æ±‚ URL æ—¶ï¼Œæˆ–è®¸ä¼šé‡åˆ°éœ€è¦é™„å¸¦ä¸€äº›å‚æ•°çš„æƒ…å†µï¼Œè¿™äº›è‡ªå®šä¹‰çš„å‚æ•°åœ¨ PyQuery è¯·æ±‚æ—¶ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œä¾‹å¦‚ cookies å’Œ headersï¼Œæˆ‘ä»¬çœ‹ä¾‹å­ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cookies = {'Cookie':'cookie'}
headers = {'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36'}

response = pq(url='https://www.baidu.com',headers=headers,cookies=cookies)
print(response)

#è¿”å›(çœç•¥)

&lt;head&gt;
    
    &lt;meta http-equiv="content-type" content="text/html;charset=utf-8"/&gt;
...
</code></pre></div></div>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>è¿™ç¯‡æ–‡ç« ç»™å¤§å®¶ä»‹ç»äº† PyQuery çš„å¸¸è§ä½¿ç”¨æ–¹æ³•ï¼Œå¤§å®¶å¦‚æœç”¨çš„ç†Ÿç»ƒçš„è¯ï¼Œè¿˜æ˜¯å¯ä»¥æå¤§åœ°èŠ‚çº¦æˆ‘ä»¬è§£æ HTML ç½‘é¡µå†…å®¹çš„æ—¶é—´çš„ã€‚PyQuery å¯ä»¥ç§°å¾—ä¸Šæ˜¯çˆ¬è™«ç¥å™¨ï¼Œè¿˜æœ‰ä¸€äº›ç”¨æ³•ç”±äºç¯‡å¹…æœ‰é™ï¼Œæ²¡æœ‰è¿›è¡Œä»‹ç»ã€‚å¤§å®¶å¯ä»¥å»å®˜ç½‘è¯¦ç»†æŸ¥çœ‹ï¼Œå®˜ç½‘åœ°å€ï¼š https://pythonhosted.org/pyquery/ ã€‚</p>

<blockquote>
  <p>æ–‡ä¸­ç¤ºä¾‹ä»£ç ï¼š<a href="https://github.com/JustDoPython/python-100-day/tree/master/day-067">Python-100-days-day067</a></p>
</blockquote>
:ET