I"Ï1<h2 id="ä»€ä¹ˆæ˜¯-spring-boot">ä»€ä¹ˆæ˜¯ Spring Boot</h2>

<p>Spring Boot æ˜¯ç”± Pivotal å›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ–æ–° Spring åº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ã€‚è¯¥æ¡†æ¶ä½¿ç”¨äº†ç‰¹å®šçš„æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜ä¸å†éœ€è¦å®šä¹‰æ ·æ¿åŒ–çš„é…ç½®ã€‚ç”¨æˆ‘çš„è¯æ¥ç†è§£ï¼Œå°±æ˜¯ Spring Boot å…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒ Maven æ•´åˆäº†æ‰€æœ‰çš„ Jar åŒ…ï¼ŒSpring Boot æ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ã€‚</p>

<h2 id="ä½¿ç”¨-spring-boot-æœ‰ä»€ä¹ˆå¥½å¤„">ä½¿ç”¨ Spring Boot æœ‰ä»€ä¹ˆå¥½å¤„</h2>

<p>å…¶å®å°±æ˜¯ç®€å•ã€å¿«é€Ÿã€æ–¹ä¾¿ï¼å¹³æ—¶å¦‚æœæˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ª Spring Web é¡¹ç›®çš„æ—¶å€™éœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p>

<ul>
  <li>1ï¼‰é…ç½® web.xmlï¼ŒåŠ è½½ Spring å’Œ Spring mvc</li>
  <li>2ï¼‰é…ç½®æ•°æ®åº“è¿æ¥ã€é…ç½® Spring äº‹åŠ¡</li>
  <li>3ï¼‰é…ç½®åŠ è½½é…ç½®æ–‡ä»¶çš„è¯»å–ï¼Œå¼€å¯æ³¨è§£</li>
  <li>4ï¼‰é…ç½®æ—¥å¿—æ–‡ä»¶</li>
  <li>â€¦</li>
  <li>é…ç½®å®Œæˆä¹‹åéƒ¨ç½² Tomcat è°ƒè¯•</li>
  <li>â€¦</li>
</ul>

<p>ç°åœ¨éå¸¸æµè¡Œå¾®æœåŠ¡ï¼Œå¦‚æœæˆ‘è¿™ä¸ªé¡¹ç›®ä»…ä»…åªæ˜¯éœ€è¦å‘é€ä¸€ä¸ªé‚®ä»¶ï¼Œå¦‚æœæˆ‘çš„é¡¹ç›®ä»…ä»…æ˜¯ç”Ÿäº§ä¸€ä¸ªç§¯åˆ†ï¼›æˆ‘éƒ½éœ€è¦è¿™æ ·æŠ˜è…¾ä¸€é!</p>

<p>ä½†æ˜¯å¦‚æœä½¿ç”¨ Spring Boot å‘¢ï¼Ÿ<br />
å¾ˆç®€å•ï¼Œæˆ‘ä»…ä»…åªéœ€è¦éå¸¸å°‘çš„å‡ ä¸ªé…ç½®å°±å¯ä»¥è¿…é€Ÿæ–¹ä¾¿çš„æ­å»ºèµ·æ¥ä¸€å¥— Web é¡¹ç›®æˆ–è€…æ˜¯æ„å»ºä¸€ä¸ªå¾®æœåŠ¡ï¼</p>

<p>ä½¿ç”¨ Spring Boot åˆ°åº•æœ‰å¤šçˆ½ï¼Œç”¨ä¸‹é¢è¿™å¹…å›¾æ¥è¡¨è¾¾</p>

<p><img src="http://favorites.ren/assets/images/2016/dog.jpg" alt="" /></p>

<h2 id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨</h2>

<p>è¯´äº†é‚£ä¹ˆå¤šï¼Œæ‰‹ç—’ç—’çš„å¾ˆï¼Œé©¬ä¸Šæ¥ä¸€å‘è¯•è¯•!</p>

<p><strong>Maven æ„å»ºé¡¹ç›®</strong></p>

<ul>
  <li>1ã€è®¿é—® http://start.spring.io/</li>
  <li>2ã€é€‰æ‹©æ„å»ºå·¥å…· Maven Projectã€Javaã€Spring Boot ç‰ˆæœ¬ 2.1.3 ä»¥åŠä¸€äº›å·¥ç¨‹åŸºæœ¬ä¿¡æ¯ï¼Œå¯å‚è€ƒä¸‹å›¾æ‰€ç¤ºï¼š</li>
</ul>

<p><img src="http://favorites.ren/assets/images/2019/springboot/spring-boot-start.png" alt="" /></p>

<ul>
  <li>3ã€ç‚¹å‡» Generate Project ä¸‹è½½é¡¹ç›®å‹ç¼©åŒ…</li>
  <li>4ã€è§£å‹åï¼Œä½¿ç”¨ Idea å¯¼å…¥é¡¹ç›®ï¼ŒFile -&gt; New -&gt; Model from Existing Source.. -&gt; é€‰æ‹©è§£å‹åçš„æ–‡ä»¶å¤¹ -&gt; OKï¼Œé€‰æ‹© Maven ä¸€è·¯ Nextï¼ŒOK done!</li>
  <li>5ã€å¦‚æœä½¿ç”¨çš„æ˜¯ Eclipseï¼ŒImport -&gt; Existing Maven Projects -&gt; Next -&gt; é€‰æ‹©è§£å‹åçš„æ–‡ä»¶å¤¹ -&gt; Finshï¼ŒOK done!</li>
</ul>

<p><strong>Idea æ„å»ºé¡¹ç›®</strong></p>

<ul>
  <li>1ã€é€‰æ‹© File -&gt; New â€”&gt; Projectâ€¦ å¼¹å‡ºæ–°å»ºé¡¹ç›®çš„æ¡†</li>
  <li>2ã€é€‰æ‹© Spring Initializrï¼ŒNext ä¹Ÿä¼šå‡ºç°ä¸Šè¿°ç±»ä¼¼çš„é…ç½®ç•Œé¢ï¼ŒIdea å¸®æˆ‘ä»¬åšäº†é›†æˆ</li>
  <li>3ã€å¡«å†™ç›¸å…³å†…å®¹åï¼Œç‚¹å‡» Next é€‰æ‹©ä¾èµ–çš„åŒ…å†ç‚¹å‡» Nextï¼Œæœ€åç¡®å®šä¿¡æ¯æ— è¯¯ç‚¹å‡» Finishã€‚</li>
</ul>

<p><strong>é¡¹ç›®ç»“æ„ä»‹ç»</strong></p>

<p><img src="http://favorites.ren/assets/images/2016/springboot2.png" alt="" /></p>

<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒSpring Boot çš„åŸºç¡€ç»“æ„å…±ä¸‰ä¸ªæ–‡ä»¶:</p>
<ul>
  <li><code class="highlighter-rouge">src/main/java</code>  ç¨‹åºå¼€å‘ä»¥åŠä¸»ç¨‹åºå…¥å£</li>
  <li><code class="highlighter-rouge">src/main/resources</code> é…ç½®æ–‡ä»¶</li>
  <li><code class="highlighter-rouge">src/test/java</code>  æµ‹è¯•ç¨‹åº</li>
</ul>

<p>å¦å¤–ï¼Œ Spring Boot å»ºè®®çš„ç›®å½•ç»“æœå¦‚ä¸‹ï¼š<br />
root package ç»“æ„ï¼š<code class="highlighter-rouge">com.example.myproject</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">com</span>
  <span class="o">+-</span> <span class="n">example</span>
    <span class="o">+-</span> <span class="n">myproject</span>
      <span class="o">+-</span> <span class="nc">Application</span><span class="o">.</span><span class="na">java</span>
      <span class="o">|</span>
      <span class="o">+-</span> <span class="n">model</span>
      <span class="o">|</span>  <span class="o">+-</span> <span class="nc">Customer</span><span class="o">.</span><span class="na">java</span>
      <span class="o">|</span>  <span class="o">+-</span> <span class="nc">CustomerRepository</span><span class="o">.</span><span class="na">java</span>
      <span class="o">|</span>
      <span class="o">+-</span> <span class="n">service</span>
      <span class="o">|</span>  <span class="o">+-</span> <span class="nc">CustomerService</span><span class="o">.</span><span class="na">java</span>
      <span class="o">|</span>
      <span class="o">+-</span> <span class="n">controller</span>
      <span class="o">|</span>  <span class="o">+-</span> <span class="nc">CustomerController</span><span class="o">.</span><span class="na">java</span>
      <span class="o">|</span>
</code></pre></div></div>

<ul>
  <li>1ã€Application.java å»ºè®®æ”¾åˆ°æ ¹ç›®å½•ä¸‹é¢,ä¸»è¦ç”¨äºåšä¸€äº›æ¡†æ¶é…ç½®</li>
  <li>2ã€model ç›®å½•ä¸»è¦ç”¨äºå®ä½“ä¸æ•°æ®è®¿é—®å±‚ï¼ˆRepositoryï¼‰</li>
  <li>3ã€service å±‚ä¸»è¦æ˜¯ä¸šåŠ¡ç±»ä»£ç </li>
  <li>4ã€controller è´Ÿè´£é¡µé¢è®¿é—®æ§åˆ¶</li>
</ul>

<p>é‡‡ç”¨é»˜è®¤é…ç½®å¯ä»¥çœå»å¾ˆå¤šé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œæ¬¢æ¥è¿›è¡Œæ›´æ”¹<br />
æœ€åï¼Œå¯åŠ¨ Application main æ–¹æ³•ï¼Œè‡³æ­¤ä¸€ä¸ª Java é¡¹ç›®æ­å»ºå¥½äº†ï¼</p>

<p><strong>å¼•å…¥ web æ¨¡å—</strong></p>

<p>1ã€pom.xmlä¸­æ·»åŠ æ”¯æŒwebçš„æ¨¡å—ï¼š</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p>pom.xml æ–‡ä»¶ä¸­é»˜è®¤æœ‰ä¸¤ä¸ªæ¨¡å—ï¼š</p>

<ul>
  <li><code class="highlighter-rouge">spring-boot-starter</code> ï¼šæ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…æ‹¬è‡ªåŠ¨é…ç½®æ”¯æŒã€æ—¥å¿—å’Œ YAMLï¼Œå¦‚æœå¼•å…¥äº† <code class="highlighter-rouge">spring-boot-starter-web</code> web æ¨¡å—å¯ä»¥å»æ‰æ­¤é…ç½®ï¼Œå› ä¸º <code class="highlighter-rouge">spring-boot-starter-web</code> è‡ªåŠ¨ä¾èµ–äº† <code class="highlighter-rouge">spring-boot-starter</code>ã€‚</li>
  <li><code class="highlighter-rouge">spring-boot-starter-test</code> ï¼šæµ‹è¯•æ¨¡å—ï¼ŒåŒ…æ‹¬ JUnitã€Hamcrestã€Mockitoã€‚</li>
</ul>

<p>2ã€ç¼–å†™ Controller å†…å®¹ï¼š</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldController</span> <span class="o">{</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Hello World"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">@RestController</code> çš„æ„æ€å°±æ˜¯ Controller é‡Œé¢çš„æ–¹æ³•éƒ½ä»¥ json æ ¼å¼è¾“å‡ºï¼Œä¸ç”¨å†å†™ä»€ä¹ˆ jackjson é…ç½®çš„äº†ï¼</p>

<p>3ã€å¯åŠ¨ä¸»ç¨‹åºï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® <code class="highlighter-rouge">http://localhost:8080/hello</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼Œæœ‰æœ¨æœ‰å¾ˆç®€å•ï¼</p>

<p><strong>å¦‚ä½•åšå•å…ƒæµ‹è¯•</strong></p>

<p>æ‰“å¼€çš„<code class="highlighter-rouge">src/test/</code>ä¸‹çš„æµ‹è¯•å…¥å£ï¼Œç¼–å†™ç®€å•çš„ http è¯·æ±‚æ¥æµ‹è¯•ï¼›ä½¿ç”¨ mockmvc è¿›è¡Œï¼Œåˆ©ç”¨<code class="highlighter-rouge">MockMvcResultHandlers.print()</code>æ‰“å°å‡ºæ‰§è¡Œç»“æœã€‚</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="nc">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloTests</span> <span class="o">{</span>

  
    <span class="kd">private</span> <span class="nc">MockMvc</span> <span class="n">mvc</span><span class="o">;</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUp</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">mvc</span> <span class="o">=</span> <span class="nc">MockMvcBuilders</span><span class="o">.</span><span class="na">standaloneSetup</span><span class="o">(</span><span class="k">new</span> <span class="nc">HelloWorldController</span><span class="o">()).</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getHello</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">mvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="nc">MockMvcRequestBuilders</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">))</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
                <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">content</span><span class="o">().</span><span class="na">string</span><span class="o">(</span><span class="n">equalTo</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">)));</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p><strong>å¼€å‘ç¯å¢ƒçš„è°ƒè¯•</strong></p>

<p>çƒ­å¯åŠ¨åœ¨æ­£å¸¸å¼€å‘é¡¹ç›®ä¸­å·²ç»å¾ˆå¸¸è§äº†å§ï¼Œè™½ç„¶å¹³æ—¶å¼€å‘webé¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œæ”¹åŠ¨é¡¹ç›®å¯é‡å¯æ€»æ˜¯æŠ¥é”™ï¼›ä½†springBootå¯¹è°ƒè¯•æ”¯æŒå¾ˆå¥½ï¼Œä¿®æ”¹ä¹‹åå¯ä»¥å®æ—¶ç”Ÿæ•ˆï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹çš„é…ç½®ï¼š</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-boot-devtools<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>

<span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
                <span class="nt">&lt;fork&gt;</span>true<span class="nt">&lt;/fork&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
<span class="nt">&lt;/plugins&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</code></pre></div></div>

<p>è¯¥æ¨¡å—åœ¨å®Œæ•´çš„æ‰“åŒ…ç¯å¢ƒä¸‹è¿è¡Œçš„æ—¶å€™ä¼šè¢«ç¦ç”¨ã€‚å¦‚æœä½ ä½¿ç”¨ <code class="highlighter-rouge">java -jar</code>å¯åŠ¨åº”ç”¨æˆ–è€…ç”¨ä¸€ä¸ªç‰¹å®šçš„ classloader å¯åŠ¨ï¼Œå®ƒä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªâ€œç”Ÿäº§ç¯å¢ƒâ€ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ä½¿ç”¨ Spring Boot å¯ä»¥éå¸¸æ–¹ä¾¿ã€å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼Œä½¿æˆ‘ä»¬ä¸ç”¨å…³å¿ƒæ¡†æ¶ä¹‹é—´çš„å…¼å®¹æ€§ï¼Œé€‚ç”¨ç‰ˆæœ¬ç­‰å„ç§é—®é¢˜ï¼Œæˆ‘ä»¬æƒ³ä½¿ç”¨ä»»ä½•ä¸œè¥¿ï¼Œä»…ä»…æ·»åŠ ä¸€ä¸ªé…ç½®å°±å¯ä»¥ï¼Œæ‰€ä»¥ä½¿ç”¨ Spring Boot éå¸¸é€‚åˆæ„å»ºå¾®æœåŠ¡ã€‚</p>

<blockquote>
  <p>æ–‡ç« å†…å®¹å·²ç»å‡çº§åˆ° Spring Boot 2.x</p>
</blockquote>

<p><strong><a href="https://github.com/ityouknow/spring-boot-examples/tree/master/spring-boot-helloWorld">ç¤ºä¾‹ä»£ç -github</a></strong></p>

<p><strong><a href="https://gitee.com/ityouknow/spring-boot-examples/tree/master/spring-boot-helloWorld">ç¤ºä¾‹ä»£ç -ç äº‘</a></strong></p>

:ET