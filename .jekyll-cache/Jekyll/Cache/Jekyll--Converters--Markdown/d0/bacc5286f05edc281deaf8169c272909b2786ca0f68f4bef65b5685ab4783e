I"ÍQ<p>ç»ˆäºè¦å¼€å§‹ç©å¤§æ•°æ®äº†ï¼Œä¹‹å‰å¯¹haoopç”Ÿæ€å‡ ä¹æ²¡æœ‰å¤ªå¤šçš„äº†è§£ï¼Œç°åœ¨èµ¶é¸­å­ä¸Šæ¶ï¼Œéœ€è¦å®Œå…¨ä½¿ç”¨å®ƒæ¥åšæ•°æ®ä¸­å¿ƒï¼Œè¿™æ˜¯æˆ‘çš„haoopç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œä»¥åä¼°è®¡ä¼šå†™å¾ˆå¤šå¤§æ•°æ®ç›¸å…³çš„æ–‡ç« ã€‚å¦å¤–æœ‰å¤§æ•°æ®å®è·µç»éªŒçš„ç½‘å‹è¯·è”ç³»æˆ‘ï¼Œæœ‰é—®é¢˜è¯·æ•™è°¢è°¢ï¼</p>

<p>Hadoopçš„æ­å»ºæœ‰ä¸‰ç§æ–¹å¼ï¼Œå•æœºç‰ˆé€‚åˆå¼€å‘è°ƒè¯•ï¼›ä¼ªåˆ†å¸ƒå¼ç‰ˆï¼Œé€‚åˆæ¨¡æ‹Ÿé›†ç¾¤å­¦ä¹ ï¼›å®Œå…¨åˆ†å¸ƒå¼ï¼Œç”Ÿäº§ä½¿ç”¨çš„æ¨¡å¼ã€‚è¿™ç¯‡æ–‡ä»¶ä»‹ç»å¦‚ä½•æ­å»ºå®Œå…¨åˆ†å¸ƒå¼çš„hadoopé›†ç¾¤ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œä¸‰ä¸ªæ•°æ®èŠ‚ç‚¹ä¸ºä¾‹æ¥è®²è§£ã€‚</p>

<h2 id="åŸºç¡€ç¯å¢ƒ">åŸºç¡€ç¯å¢ƒ</h2>

<h3 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h3>

<p>1ã€è½¯ä»¶ç‰ˆæœ¬</p>

<p>å››å°æœåŠ¡å™¨é…ç½®ï¼Œç³»ç»Ÿï¼šcentos6.5ã€å†…å­˜ï¼š1Gã€ç¡¬ç›˜ï¼š20G<br />
å››å°æœåŠ¡å™¨åˆ†é…çš„IPåœ°å€ï¼š192.168.0.71/72/73/74<br />
è§„åˆ’ï¼š71ç”¨ä½œä¸»èŠ‚ç‚¹ç”¨ä½œhadoop-masterï¼Œå…¶å®ƒä¸‰å°ä¸ºæ•°æ®èŠ‚ç‚¹72ã€73ã€74ç”¨ä½œhadoop-salve1~3  <br />
jdkå’Œç”Ÿæˆä¿æŒä¸€è‡´ä½¿ç”¨1.7ç‰ˆæœ¬  <br />
hadoopä½¿ç”¨2.7.3ç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€ï¼šhttp://apache.claz.org/hadoop/common/hadoop-2.7.3/hadoop-2.7.3.tar.gz</p>

<p>2ã€hosté…ç½®å’Œä¸»æœºåï¼ˆå››å°ï¼‰</p>

<p>ä¿®æ”¹å››å°æœåŠ¡å™¨çš„hostsæ–‡ä»¶</p>

<p><code class="highlighter-rouge">vim /etc/hosts</code></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>192.168.0.71 hadoop-master 
192.168.0.72 hadoop-slave1 
192.168.0.73 hadoop-slave2
192.168.0.74 hadoop-slave3
</code></pre></div></div>

<p>åˆ†åˆ«ä¿®æ”¹æœåŠ¡å™¨çš„ä¸»æœºå:HOSTNAMEï¼Œmasterä¸ºä¾‹è¯´æ˜</p>

<p><code class="highlighter-rouge">vi /etc/sysconfig/network</code></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">HOSTNAME</span><span class="o">=</span>hadoop-master
</code></pre></div></div>

<p>æ‰§è¡Œ<code class="highlighter-rouge">reboot</code>åç”Ÿæ•ˆï¼Œå®Œæˆä¹‹åä¾æ¬¡ä¿®æ”¹å…¶å®ƒsalveæœåŠ¡å™¨ä¸ºï¼š hadoop-slave1~3ã€‚</p>

<p>3ã€æœåŠ¡å™¨å®‰è£…jdkï¼ˆå››å°ï¼‰</p>

<p>å»ºè®®ä½¿ç”¨yumå®‰è£…jdk,ä¹Ÿå¯ä»¥è‡ªè¡Œä¸‹è½½å®‰è£…</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">-y</span> <span class="nb">install </span>java-1.7.0-openjdk<span class="k">*</span>
</code></pre></div></div>

<p>é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶<code class="highlighter-rouge">vim /etc/profile</code></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/jre-1.7.0-openjdk.x86_64
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$JAVA_HOME</span>/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">CLASSPATH</span><span class="o">=</span>.:<span class="nv">$JAVA_HOME</span>/lib/dt.jar:<span class="nv">$JAVA_HOME</span>/lib/tools.jar
</code></pre></div></div>

<p>ä½¿ç”¨souceå‘½ä»¤è®©ç«‹åˆ»ç”Ÿæ•ˆ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /etc/profile
</code></pre></div></div>

<h3 id="å…å¯†ç™»é™†">å…å¯†ç™»é™†</h3>

<p>ä¸€ã€é¦–å…ˆå…³é—­å››å°æœåŠ¡å™¨çš„é˜²ç«å¢™å’ŒSELINUX</p>

<p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service iptables status
</code></pre></div></div>

<p>å…³é—­é˜²ç«å¢™</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service iptables stop 
chkconfig iptables off
</code></pre></div></div>

<p>å…³é—­SELINUXåï¼Œéœ€è¦é‡å¯æœåŠ¡å™¨</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--</span> å…³é—­SELINUX
<span class="c"># vim /etc/selinux/config</span>
<span class="nt">--</span> æ³¨é‡Šæ‰
<span class="c">#SELINUX=enforcing</span>
<span class="c">#SELINUXTYPE=targeted</span>
<span class="nt">--</span> æ·»åŠ 
<span class="nv">SELINUX</span><span class="o">=</span>disabled
</code></pre></div></div>

<p>äºŒã€å…å¯†ç ç™»å½•æœ¬æœº</p>

<p>ä¸‹é¢ä»¥é…ç½®hadoop-masteræœ¬æœºæ— å¯†ç ç™»å½•ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œç”¨æˆ·éœ€å‚ç…§ä¸‹é¢æ­¥éª¤å®Œæˆh-salve1~3ä¸‰å°å­èŠ‚ç‚¹æœºå™¨çš„æœ¬æœºæ— å¯†ç ç™»å½•ï¼›</p>

<p>1ï¼‰ç”Ÿäº§ç§˜é’¥</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa
</code></pre></div></div>

<p>2ï¼‰å°†å…¬é’¥è¿½åŠ åˆ°â€authorized_keysâ€æ–‡ä»¶</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.ssh/id_rsa.pub <span class="o">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div></div>

<p>3ï¼‰èµ‹äºˆæƒé™</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>600 .ssh/authorized_keys
</code></pre></div></div>

<p>4ï¼‰éªŒè¯æœ¬æœºèƒ½æ— å¯†ç è®¿é—®</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh hadoop-master
</code></pre></div></div>

<p><em>æœ€åï¼Œä¾æ¬¡é…ç½®h-salve1~3æ— å¯†ç è®¿é—®</em></p>

<p>äºŒã€hadoop-masteræœ¬æœºæ— å¯†ç ç™»å½•hadoop-slave1ã€hadoop-slave2ã€hadoop-slave3ï¼Œä»¥hadoop-masteræ— å¯†ç ç™»å½•hadoop-slave1ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼š</p>

<p>1ï¼‰ç™»å½•hadoop-slave1 ï¼Œå¤åˆ¶hadoop-masteræœåŠ¡å™¨çš„å…¬é’¥â€id_rsa.pubâ€åˆ°hadoop-slave1æœåŠ¡å™¨çš„â€rootâ€ç›®å½•ä¸‹ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp root@hadoop-master:/root/.ssh/id_rsa.pub /root/
</code></pre></div></div>

<p>2ï¼‰å°†hadoop-masterçš„å…¬é’¥ï¼ˆid_rsa.pubï¼‰è¿½åŠ åˆ°hadoop-slave1çš„authorized_keysä¸­</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>id_rsa.pub <span class="o">&gt;&gt;</span> .ssh/authorized_keys
<span class="nb">rm</span> <span class="nt">-rf</span>  id_rsa.pub
</code></pre></div></div>

<p>3ï¼‰åœ¨ hadoop-masterä¸Šé¢æµ‹è¯•</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh  hadoop-slave1
</code></pre></div></div>

<p>ä¸‰ã€é…ç½®hadoop-slave1~hadoop-slave3æœ¬æœºæ— å¯†ç ç™»å½•hadoop-master</p>

<p>ä¸‹é¢ä»¥hadoop-slave1æ— å¯†ç ç™»å½•hadoop-masterä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œç”¨æˆ·éœ€å‚ç…§ä¸‹é¢æ­¥éª¤å®Œæˆhadoop-slave2~hadoop-slave3æ— å¯†ç ç™»å½•hadoop-masterã€‚</p>

<p>1ï¼‰ç™»å½•hadoop-masterï¼Œå¤åˆ¶hadoop-slave1æœåŠ¡å™¨çš„å…¬é’¥â€id_rsa.pubâ€åˆ°hadoop-masteræœåŠ¡å™¨çš„â€/root/â€ç›®å½•ä¸‹ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp root@hadoop-slave1:/root/.ssh/id_rsa.pub /root/
</code></pre></div></div>

<p>2ï¼‰å°†hadoop-slave1çš„å…¬é’¥ï¼ˆid_rsa.pubï¼‰è¿½åŠ åˆ°hadoop-masterçš„authorized_keysä¸­ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>id_rsa.pub <span class="o">&gt;&gt;</span> .ssh/authorized_keys
<span class="nb">rm</span> <span class="nt">-rf</span>  id_rsa.pub //åˆ é™¤id_rsa.pub
</code></pre></div></div>

<p>3ï¼‰åœ¨ hadoop-slave1ä¸Šé¢æµ‹è¯•</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh  hadoop-master
</code></pre></div></div>

<p><em>ä¾æ¬¡é…ç½® hadoop-slave2ã€hadoop-slave3</em></p>

<p>åˆ°æ­¤ä¸»ä»çš„æ— å¯†ç™»å½•å·²ç»å®Œæˆäº†ã€‚</p>

<h2 id="hadoopç¯å¢ƒæ­å»º">Hadoopç¯å¢ƒæ­å»º</h2>

<h3 id="é…ç½®hadoop-masterçš„hadoopç¯å¢ƒ">é…ç½®hadoop-masterçš„hadoopç¯å¢ƒ</h3>

<p>1ã€hadoop-masterä¸Š è§£å‹ç¼©å®‰è£…åŒ…åŠåˆ›å»ºåŸºæœ¬ç›®å½•</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#ä¸‹è½½  </span>
wget http://apache.claz.org/hadoop/common/hadoop-2.7.3/hadoop-2.7.3.tar.gz
<span class="c">#è§£å‹  </span>
<span class="nb">tar</span> <span class="nt">-xzvf</span>  hadoop-2.7.3.tar.gz    <span class="nt">-C</span> /usr/local 
<span class="c">#é‡å‘½å   </span>
<span class="nb">mv  </span>hadoop-2.7.3  hadoop
</code></pre></div></div>

<p>2ã€ é…ç½®hadoop-masterçš„hadoopç¯å¢ƒå˜é‡</p>

<p>1ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶<code class="highlighter-rouge">vi /etc/profile</code></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">HADOOP_HOME</span><span class="o">=</span>/usr/local/hadoop
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HADOOP_HOME</span>/bin 
</code></pre></div></div>

<p>ä½¿å¾—hadoopå‘½ä»¤åœ¨å½“å‰ç»ˆç«¯ç«‹å³ç”Ÿæ•ˆ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /etc/profile
</code></pre></div></div>

<p><em>ä¸‹é¢é…ç½®ï¼Œæ–‡ä»¶éƒ½åœ¨ï¼š<code class="highlighter-rouge">/usr/local/hadoop/etc/hadoop</code>è·¯å¾„ä¸‹</em></p>

<p>2ã€é…ç½®core-site.xml</p>

<p>ä¿®æ”¹Hadoopæ ¸å¿ƒé…ç½®æ–‡ä»¶<code class="highlighter-rouge">/usr/local/hadoop/etc/hadoop/core-site.xml</code>ï¼Œé€šè¿‡<code class="highlighter-rouge">fs.default.name</code>æŒ‡å®šNameNodeçš„IPåœ°å€å’Œç«¯å£å·ï¼Œé€šè¿‡<code class="highlighter-rouge">hadoop.tmp.dir</code>æŒ‡å®šhadoopæ•°æ®å­˜å‚¨çš„ä¸´æ—¶æ–‡ä»¶å¤¹ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>hadoop.tmp.dir<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>file:/usr/local/hadoop/tmp<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;description&gt;</span>Abase for other temporary directories.<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>fs.defaultFS<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>hdfs://hadoop-master:9000<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<p><strong>ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æ²¡æœ‰é…ç½®<code class="highlighter-rouge">hadoop.tmp.dir</code>å‚æ•°ï¼Œæ­¤æ—¶ç³»ç»Ÿé»˜è®¤çš„ä¸´æ—¶ç›®å½•ä¸ºï¼š<code class="highlighter-rouge">/tmp/hadoo-hadoop</code>ã€‚è€Œè¿™ä¸ªç›®å½•åœ¨æ¯æ¬¡é‡å¯åéƒ½ä¼šè¢«åˆ é™¤ï¼Œå¿…é¡»é‡æ–°æ‰§è¡Œformatæ‰è¡Œï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚</strong></p>

<p>3ã€é…ç½®hdfs-site.xmlï¼š</p>

<p>ä¿®æ”¹HDFSæ ¸å¿ƒé…ç½®æ–‡ä»¶<code class="highlighter-rouge">/usr/local/hadoop/etc/hadoop/hdfs-site.xml</code>ï¼Œé€šè¿‡<code class="highlighter-rouge">dfs.replication</code>æŒ‡å®šHDFSçš„å¤‡ä»½å› å­ä¸º3ï¼Œé€šè¿‡<code class="highlighter-rouge">dfs.name.dir</code>æŒ‡å®šnamenodeèŠ‚ç‚¹çš„æ–‡ä»¶å­˜å‚¨ç›®å½•ï¼Œé€šè¿‡<code class="highlighter-rouge">dfs.data.dir</code>æŒ‡å®šdatanodeèŠ‚ç‚¹çš„æ–‡ä»¶å­˜å‚¨ç›®å½•ã€‚</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>dfs.replication<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>3<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>dfs.name.dir<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>/usr/local/hadoop/hdfs/name<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>dfs.data.dir<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>/usr/local/hadoop/hdfs/data<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<p>4ã€é…ç½®mapred-site.xml</p>

<p>æ‹·è´mapred-site.xml.templateä¸ºmapred-site.xmlï¼Œåœ¨è¿›è¡Œä¿®æ”¹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> /usr/local/hadoop/etc/hadoop/mapred-site.xml.template /usr/local/hadoop/etc/hadoop/mapred-site.xml  
vim /usr/local/hadoop/etc/hadoop/mapred-site.xml
</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
  <span class="nt">&lt;property&gt;</span>
      <span class="nt">&lt;name&gt;</span>mapreduce.framework.name<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;value&gt;</span>yarn<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
   <span class="nt">&lt;property&gt;</span>
      <span class="nt">&lt;name&gt;</span>mapred.job.tracker<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;value&gt;</span>http://hadoop-master:9001<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<p>5ã€é…ç½®yarn-site.xml</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
<span class="c">&lt;!-- Site specific YARN configuration properties --&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>yarn.nodemanager.aux-services<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>mapreduce_shuffle<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property&gt;</span>
        <span class="nt">&lt;name&gt;</span>yarn.resourcemanager.hostname<span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;value&gt;</span>hadoop-master<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<p>6ã€é…ç½®mastersæ–‡ä»¶</p>

<p>ä¿®æ”¹<code class="highlighter-rouge">/usr/local/hadoop/etc/hadoop/masters</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æŒ‡å®šnamenodeèŠ‚ç‚¹æ‰€åœ¨çš„æœåŠ¡å™¨æœºå™¨ã€‚åˆ é™¤localhostï¼Œæ·»åŠ namenodeèŠ‚ç‚¹çš„ä¸»æœºåhadoop-masterï¼›ä¸å»ºè®®ä½¿ç”¨IPåœ°å€ï¼Œå› ä¸ºIPåœ°å€å¯èƒ½ä¼šå˜åŒ–ï¼Œä½†æ˜¯ä¸»æœºåä¸€èˆ¬ä¸ä¼šå˜åŒ–ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /usr/local/hadoop/etc/hadoop/masters
<span class="c">## å†…å®¹</span>
hadoop-master
</code></pre></div></div>

<p>7ã€é…ç½®slavesæ–‡ä»¶ï¼ˆMasterä¸»æœºç‰¹æœ‰ï¼‰</p>

<p>ä¿®æ”¹<code class="highlighter-rouge">/usr/local/hadoop/etc/hadoop/slaves</code>æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æŒ‡å®šå“ªäº›æœåŠ¡å™¨èŠ‚ç‚¹æ˜¯datanodeèŠ‚ç‚¹ã€‚åˆ é™¤locahostï¼Œæ·»åŠ æ‰€æœ‰datanodeèŠ‚ç‚¹çš„ä¸»æœºåï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /usr/local/hadoop/etc/hadoop/slaves
<span class="c">## å†…å®¹</span>
hadoop-slave1
hadoop-slave2
hadoop-slave3
</code></pre></div></div>

<h3 id="é…ç½®hadoop-slaveçš„hadoopç¯å¢ƒ">é…ç½®hadoop-slaveçš„hadoopç¯å¢ƒ</h3>

<p>ä¸‹é¢ä»¥é…ç½®hadoop-slave1çš„hadoopä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºï¼Œç”¨æˆ·éœ€å‚ç…§ä»¥ä¸‹æ­¥éª¤å®Œæˆå…¶ä»–hadoop-slave2~3æœåŠ¡å™¨çš„é…ç½®ã€‚</p>

<p>1ï¼‰å¤åˆ¶hadoopåˆ°hadoop-slave1èŠ‚ç‚¹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp <span class="nt">-r</span> /usr/local/hadoop hadoop-slave1:/usr/local/
</code></pre></div></div>

<p>ç™»å½•hadoop-slave1æœåŠ¡å™¨ï¼Œåˆ é™¤slaveså†…å®¹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> /usr/local/hadoop/etc/hadoop/slaves
</code></pre></div></div>

<p>2ï¼‰é…ç½®ç¯å¢ƒå˜é‡</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /etc/profile
<span class="c">## å†…å®¹</span>
<span class="nb">export </span><span class="nv">HADOOP_HOME</span><span class="o">=</span>/usr/local/hadoop
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$HADOOP_HOME</span>/bin
</code></pre></div></div>

<p>ä½¿å¾—hadoopå‘½ä»¤åœ¨å½“å‰ç»ˆç«¯ç«‹å³ç”Ÿæ•ˆï¼›</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> /etc/profile
</code></pre></div></div>

<p>ä¾æ¬¡é…ç½®å…¶å®ƒslaveæœåŠ¡</p>

<h3 id="å¯åŠ¨é›†ç¾¤">å¯åŠ¨é›†ç¾¤</h3>

<p>1ã€æ ¼å¼åŒ–HDFSæ–‡ä»¶ç³»ç»Ÿ</p>

<p>è¿›å…¥masterçš„~/hadoopç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/hadoop namenode <span class="nt">-format</span>
</code></pre></div></div>
<p><strong>æ ¼å¼åŒ–namenodeï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨æœåŠ¡å‰æ‰§è¡Œçš„æ“ä½œï¼Œä»¥åä¸éœ€è¦æ‰§è¡Œã€‚</strong></p>

<p>2ã€ç„¶åå¯åŠ¨hadoopï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sbin/start-all.sh
</code></pre></div></div>

<p>3ã€ä½¿ç”¨jpså‘½ä»¤æŸ¥çœ‹è¿è¡Œæƒ…å†µ</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#master æ‰§è¡Œ jpsæŸ¥çœ‹è¿è¡Œæƒ…å†µ</span>
25928 SecondaryNameNode
25742 NameNode
26387 Jps
26078 ResourceManager
</code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#slave æ‰§è¡Œ jpsæŸ¥çœ‹è¿è¡Œæƒ…å†µ</span>
24002 NodeManager
23899 DataNode
24179 Jps
</code></pre></div></div>

<p>4ã€å‘½ä»¤æŸ¥çœ‹Hadoopé›†ç¾¤çš„çŠ¶æ€</p>

<p>é€šè¿‡ç®€å•çš„jpså‘½ä»¤è™½ç„¶å¯ä»¥æŸ¥çœ‹HDFSæ–‡ä»¶ç®¡ç†ç³»ç»Ÿã€MapReduceæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œä½†æ˜¯æ— æ³•æŸ¥çœ‹åˆ°Hadoopæ•´ä¸ªé›†ç¾¤çš„è¿è¡ŒçŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="highlighter-rouge">hadoop dfsadmin -report</code>è¿›è¡ŒæŸ¥çœ‹ã€‚ç”¨è¯¥å‘½ä»¤å¯ä»¥å¿«é€Ÿå®šä½å‡ºå“ªäº›èŠ‚ç‚¹æŒ‚æ‰äº†ï¼ŒHDFSçš„å®¹é‡ä»¥åŠä½¿ç”¨äº†å¤šå°‘ï¼Œä»¥åŠæ¯ä¸ªèŠ‚ç‚¹çš„ç¡¬ç›˜ä½¿ç”¨æƒ…å†µã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hadoop dfsadmin <span class="nt">-report</span>
</code></pre></div></div>

<p>è¾“å‡ºç»“æœï¼š</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Configured Capacity: 50108030976 <span class="o">(</span>46.67 GB<span class="o">)</span>
Present Capacity: 41877471232 <span class="o">(</span>39.00 GB<span class="o">)</span>
DFS Remaining: 41877385216 <span class="o">(</span>39.00 GB<span class="o">)</span>
DFS Used: 86016 <span class="o">(</span>84 KB<span class="o">)</span>
DFS Used%: 0.00%
Under replicated blocks: 0
Blocks with corrupt replicas: 0
Missing blocks: 0
Missing blocks <span class="o">(</span>with replication <span class="nb">factor </span>1<span class="o">)</span>: 0
......
</code></pre></div></div>

<p>5ã€hadoop é‡å¯</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sbin/stop-all.sh
sbin/start-all.sh
</code></pre></div></div>

<h2 id="é”™è¯¯">é”™è¯¯</h2>

<p>åœ¨æ­å»ºå®Œæˆå¯åŠ¨çš„æ—¶å€™ï¼Œå‘ç”Ÿè¿‡ä¸¤ä¸ªé”™è¯¯ï¼š</p>

<p>1ã€ xxx: Error: JAVA_HOME is not set and could not be found</p>

<p>è¿™ä¸ªé”™è¯¯æ„æ€æ²¡æœ‰æ‰¾åˆ°jdkçš„ç¯å¢ƒå˜é‡ï¼Œéœ€è¦åœ¨hadoop-env.shé…ç½®ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /usr/local/hadoop/etc/hadoop/hadoop-env.sh 
<span class="c">## é…ç½®é¡¹</span>
<span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/jre-1.7.0-openjdk.x86_64
</code></pre></div></div>

<p>2ã€The authenticity of host â€˜0.0.0.0 (0.0.0.0)â€™ canâ€™t be established.</p>

<p>è§£å†³æ–¹æ¡ˆå…³é—­SELINUX</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--</span> å…³é—­SELINUX
<span class="c"># vim /etc/selinux/config</span>
<span class="nt">--</span> æ³¨é‡Šæ‰
<span class="c">#SELINUX=enforcing</span>
<span class="c">#SELINUXTYPE=targeted</span>
â€” æ·»åŠ 
<span class="nv">SELINUX</span><span class="o">=</span>disabled
</code></pre></div></div>

<p>å‚è€ƒï¼š
<a href="http://www.linuxidc.com/Linux/2015-03/114669p4.htm">Hadoopä¹‹å®Œå…¨åˆ†å¸ƒå¼ç¯å¢ƒæ­å»º</a></p>

:ET